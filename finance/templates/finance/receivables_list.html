{% extends "base.html" %}

{% block title %}Recebíveis{% endblock %}

{% block content %}
  <div class="dashboard-layout">
    {% include "partials/nav.html" %}

    <main class="main-content">
      <div class="container-xxl py-4">
        <header class="flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 mb-4">
          <div>
            <p class="text-uppercase text-muted fw-semibold small mb-1">Recebíveis</p>
            <h1 class="h3 fw-bold mb-1">Receitas esperadas</h1>
            <p class="text-muted mb-0">Acompanhe valores a receber.</p>
          </div>
          <button
            class="btn btn-primary"
            hx-get="{% url 'finance:receivable-create' %}"
            hx-target="#modal-root"
            hx-swap="innerHTML"
          >
            <i class="bi bi-plus-lg me-2"></i>Novo recebível
          </button>
        </header>

        <section class="card border-0 shadow-sm mb-3">
          <div class="card-body">
            <form
              class="row g-2 align-items-end"
              hx-get="{% url 'finance:receivables' %}"
              hx-target="#receivable-table"
              hx-swap="innerHTML"
            >
              <div class="col-sm-6">
                <label class="form-label">Status</label>
                <select name="status" class="form-select">
                  <option value="all" {% if status == 'all' %}selected{% endif %}>Todos</option>
                  <option value="EXPECTED" {% if status == 'EXPECTED' %}selected{% endif %}>Esperado</option>
                  <option value="RECEIVED" {% if status == 'RECEIVED' %}selected{% endif %}>Recebido</option>
                  <option value="CANCELED" {% if status == 'CANCELED' %}selected{% endif %}>Cancelado</option>
                </select>
              </div>
              <div class="col-sm-6">
                <button class="btn btn-outline-primary w-100" type="submit">Filtrar</button>
              </div>
            </form>
          </div>
        </section>

        <section class="card border-0 shadow-sm">
          <div class="card-body" id="receivable-table">
            {% include "finance/partials/_receivable_table.html" %}
          </div>
        </section>
      </div>
    </main>
  </div>
{% endblock %}
